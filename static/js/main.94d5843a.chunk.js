(this.webpackJsonpbasket_front_end=this.webpackJsonpbasket_front_end||[]).push([[0],{28:function(e,t,n){e.exports=n(39)},33:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),o=n.n(r),i=(n(33),n(8)),u=n(10),l=n(14),p=n(7),s=n(13),d=n(1);var m=function(){Object(d.c)((function(e){return e.employee}));var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)({login:"",password:"",name:""}),i=Object(s.a)(o,2),u=i[0],m=i[1],h=Object(d.b)();function E(e){m(Object(p.a)({},u,Object(l.a)({},e.target.name,e.target.value)))}return c.a.createElement("div",null,c.a.createElement("div",{className:"form-page"},c.a.createElement("h1",null,n?"Log In":"New Employee"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=n?"/login":"/employees",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)};fetch("https://basketapp-api.herokuapp.com//"+t,a).then((function(e){return e.json()})).then((function(e){e.employee?(localStorage.token=e.token,localStorage.employee=JSON.stringify(e.employee),h({type:"SET_EMPLOYEE",payload:e.employee}),h({type:"SET_CURRENT_CHECK",payload:{id:-1}})):alert(e.error)}))}},"Login:",c.a.createElement("input",{type:"text",name:"login",value:u.login,onChange:E,placeholder:"Login"}),"Password:",c.a.createElement("input",{type:"password",name:"password",value:u.password,onChange:E,placeholder:"Password"}),!n&&c.a.createElement("div",null,"Name:",c.a.createElement("input",{type:"text",name:"name",value:u.name,onChange:E,placeholder:"Name"})),c.a.createElement("input",{class:"ui button",type:"submit"})),n?c.a.createElement("button",{class:"ui button",onClick:function(){return r(!1)}},"Set new employee"):c.a.createElement("button",{class:"ui button",onClick:function(){return r(!0)}},"Employee log in")))};function h(){var e=Object(a.useState)({name:"",price:"",tax:""}),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(d.b)();function i(e){r(Object(p.a)({},n,Object(l.a)({},e.target.name,e.target.value)))}return c.a.createElement("div",{className:"item-form"},c.a.createElement("h1",null,"New Product"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("https://basketapp-api.herokuapp.com//products",t).then((function(e){return e.json()})).then((function(e){console.log("data",e),o({type:"ADD_PRODUCT",payload:e})}))}},"Name:",c.a.createElement("input",{type:"text",name:"name",value:n.name,onChange:i,placeholder:"Name"}),"Price:",c.a.createElement("input",{type:"text",name:"price",value:n.price,onChange:i,placeholder:"Price"}),"Tax:",c.a.createElement("input",{type:"text",name:"tax",value:n.tax,onChange:i,placeholder:"8875"}),c.a.createElement("input",{class:"ui button",type:"submit"})))}function E(){var e=Object(d.c)((function(e){return e.employee})),t=Object(d.c)((function(e){return e.checks})),n=Object(d.b)();return c.a.createElement("div",{class:"pusher"},c.a.createElement("button",{class:"ui button",onClick:function(){fetch("https://basketapp-api.herokuapp.com/checks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({employee:e})}).then((function(e){return e.json()})).then((function(e){n({type:"ADD_CHECK",payload:e}),n({type:"SET_CURRENT_CHECK",payload:t[t.length-1]})}))}},"New Check"),c.a.createElement(m,null),c.a.createElement(h,null))}var f=n(25),b=n.n(f);function y(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.currentCheck})),n=Object(d.c)((function(e){return e.checks})),a=-1===t.id?0:t.products.reduce((function(e,t){return e+t.price}),0);return c.a.createElement("div",null,c.a.createElement(b.a,{token:function(c){var r={token:c.id},o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({charge:r,price:100*a})};fetch("https://basketapp-api.herokuapp.com//charge_adapter",o).then((function(e){return e.json()})).then((function(c){!function(c){var r={check_id:t.id,amount:a,credit:!0,last_four:c.payment_method_details.card.last4,stripe_id:c.id};fetch("https://basketapp-api.herokuapp.com/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(){e({type:"SET_STATUS_CURRENT_CHECK",payload:!1});e({type:"SET_STATUS",payload:{setCheck:t,status:!1}});var a=n.length>0?{type:"SET_CURRENT_CHECK",payload:n.find((function(e){return e.open&&e.id!==t.id}))}:{type:"SET_CURRENT_CHECK",payload:{id:-1}};e(a)}))}(c)}))},stripeKey:"pk_test_hu8PVV0R7B8kvBXe6dcMJzv900zdD0uCqV"}))}function C(){return c.a.createElement(y,{class:"pusher"})}function k(e){var t=e.product;return c.a.createElement("div",null,c.a.createElement("button",{key:t.id,onClick:function(){return e.addProductToCurrentCheck(t)},class:"ui button"},t.name))}function O(){var e=Object(d.c)((function(e){return e.currentCheck})),t=Object(d.b)(),n=Object(d.c)((function(e){return e.products}));Object(a.useEffect)((function(){fetch("https://basketapp-api.herokuapp.com//products").then((function(e){return e.json()})).then((function(e){t({type:"SET_PRODUCTS",payload:e})}))}),[]);var r=function(n){console.log(n.id),fetch("https://basketapp-api.herokuapp.com//sales",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({check_id:e.id,product_id:n.id})}).then((function(e){return e.json()})).then((function(a){t({type:"ADD_PRODUCT_TO_CURRENT_CHECK",payload:n}),t({type:"ADD_PRODUCT_TO_CHECKS",payload:{newCheck:e,newProduct:n}})}))};return c.a.createElement("div",null,n.map((function(e){return c.a.createElement(k,{product:e,key:e.id,addProductToCurrentCheck:r})})))}function v(){return c.a.createElement(O,{class:"pusher"})}function T(){var e=Object(d.c)((function(e){return e.employee}));return c.a.createElement("div",{id:"nav-bar"},c.a.createElement("p",{class:"item"},"Logged in: ",e.name),c.a.createElement("nav",{i:!0},c.a.createElement(i.b,{to:"/"},c.a.createElement("button",{class:"ui button item nav-button"},"Products")),c.a.createElement(i.b,{to:"/options"},c.a.createElement("button",{class:"ui button item nav-button"},"Options")),c.a.createElement(i.b,{to:"/payment"},c.a.createElement("button",{class:"ui button item nav-button"},"Payment")),c.a.createElement(i.b,{to:"/reports"},c.a.createElement("button",{class:"ui button item nav-button"},"Reports"))))}function _(e){var t=Object(d.b)(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),o=r[0],i=r[1],u=e.check,l=0;return c.a.createElement("div",null,u.id,c.a.createElement("button",{class:"ui button",onClick:function(){i(!o)}},"Show Check"),o?c.a.createElement("div",null,c.a.createElement("ul",null,u.products.map((function(e){return l+=e.price,c.a.createElement("li",{key:e.id},c.a.createElement("h5",{key:e.name},e.name),c.a.createElement("h6",{key:e.price},e.price))}))),c.a.createElement("h4",null,"Total: ",l),c.a.createElement("button",{class:"ui button",onClick:function(){return function(){var e={check_id:u.id};fetch("https://basketapp-api.herokuapp.com//reopen_check",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(){t({type:"SET_STATUS",payload:{setCheck:u,status:!0}})}))}()}},"Reopen Check")):c.a.createElement("div",null))}function j(){var e=Object(d.c)((function(e){return e.checks}));Object(d.c)((function(e){return e.employee}));return c.a.createElement("div",null,c.a.createElement("h1",null,"Closed Checks"),e.length>0?e.map((function(e){if(!e.open)return c.a.createElement("div",null,c.a.createElement(_,{key:e.id,check:e}))})):"no checks")}function S(){return c.a.createElement("div",{class:"pusher"},c.a.createElement(T,{class:"ui visible top sidebar"}),c.a.createElement("div",{class:"pusher"},c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",component:v}),c.a.createElement(u.a,{exact:!0,path:"/options",component:E}),c.a.createElement(u.a,{exact:!0,path:"/payment",component:C}),c.a.createElement(u.a,{exact:!0,path:"/reports",component:j}))))}function g(e){var t=e.check;return c.a.createElement("div",{key:t.id,onClick:function(){return e.changeCurrentCheck(t)}},t.id)}function R(e){var t=e.check,n=Object(d.b)(),a=0;return c.a.createElement("div",null,t.id,c.a.createElement("ul",null,t.products.map((function(e){return a+=e.price,c.a.createElement("li",{key:e.id},c.a.createElement("h5",{key:e.name},e.name),c.a.createElement("h6",{key:e.price},e.price),c.a.createElement("button",{class:"ui button",onClick:function(){return function(e){fetch("https://basketapp-api.herokuapp.com//delete_from_check",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({check_id:t.id,product_id:e.id})}).then((function(e){return e.json()})).then((function(a){console.log(),n({type:"DELETE_PRODUCT",payload:{selCheck:t,delProduct:e}}),n({type:"DELETE_PRODUCT_FROM_CURRENT_CHECK",payload:e})}))}(e)}},"Delete Product"))}))),c.a.createElement("h3",null,"Total: ",a))}function P(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.checks})),n=Object(d.c)((function(e){return e.employee})),r=Object(d.c)((function(e){return e.currentCheck}));Object(a.useEffect)((function(){-1===r.id&&t.length>0&&e({type:"SET_CURRENT_CHECK",payload:t.find((function(e){return e.open}))})}),[t,e]),Object(a.useEffect)((function(){fetch("https://basketapp-api.herokuapp.com//get_checks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({employee:n})}).then((function(e){return e.json()})).then((function(t){e({type:"SET_CHECKS",payload:t})}))}),[n]);var o=function(t){e({type:"SET_CURRENT_CHECK",payload:t})};return c.a.createElement("div",{class:"ui visible left sidebar"},-1===r.id?c.a.createElement("div",{key:-1},"No Open Checks"):c.a.createElement(R,{key:r.id,check:r,class:"item"}),t.length>0?t.map((function(e){if(e.id!==r.id&&e.open)return c.a.createElement(g,{key:e.id,check:e,changeCurrentCheck:o,class:"item"})})):"no checks")}var D=function(){var e=Object(d.b)();return Object(a.useEffect)((function(){localStorage.length>0&&e({type:"SET_EMPLOYEE",payload:JSON.parse(localStorage.employee)})}),[e]),c.a.createElement("div",{id:"app"},c.a.createElement(i.a,null,c.a.createElement(P,null),c.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=n(12),U=n(27),w=n(9);function K(e,t){return Object(w.a)(e).filter((function(e){return e.id!==t.id}))}function A(e,t){return[].concat(Object(w.a)(e),[t])}function H(e,t){var n=e.slice();return console.log("hayyy"),n.map((function(e){if(e.id===t.selCheck.id){var n=e.products.findIndex((function(e){return e.id===t.delProduct.id}));return e.products.splice(n,1)}})),n}function x(e,t){var n=e.slice();return n.map((function(e){if(e.id===t.newCheck.id)return e.products.push(t.newProduct)})),n}function L(e,t){var n=e.slice();return n.map((function(e){if(e.id===t.setCheck.id)return e.open=t.status})),n}function J(e,t){return Object(p.a)({},e,{products:[].concat(Object(w.a)(e.products),[t])})}function M(e,t){var n=e.products.slice(),a=e.products.findIndex((function(e){return e.id===t.id}));return console.log("test",e.products.splice(a,1)),n.splice(a,1),console.log("products",n),Object(p.a)({},e,{products:n})}function B(e,t){return Object(p.a)({},e,{open:t})}function I(e,t){return Object(w.a)(e).filter((function(e){return e.id!==t.id}))}function Y(e,t){return[].concat(Object(w.a)(e),[t])}var V={employee:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_EMPLOYEE":return a;case"CLEAR_EMPLOYEE":return{};default:return e}},currentCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:-1},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_CURRENT_CHECK":return a;case"ADD_PRODUCT_TO_CURRENT_CHECK":return J(e,a);case"DELETE_PRODUCT_FROM_CURRENT_CHECK":return M(e,a);case"SET_STATUS_CURRENT_CHECK":return B(e,a);default:return e}},checks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_CHECKS":return a;case"DELETE_CHECK":return K(e,a);case"ADD_CHECK":return A(e,a);case"DELETE_PRODUCT":return H(e,a);case"ADD_PRODUCT_TO_CHECKS":return x(e,a);case"SET_STATUS":return L(e,a);default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_PRODUCTS":return a;case"DELETE_PRODUCT":return I(e,a);case"ADD_PRODUCT":return Y(e,a);default:return e}}},z=Object(N.c)(V),F=Object(N.a)(U.a),W=Object(N.d)(z,F);o.a.render(c.a.createElement(d.a,{store:W},c.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.94d5843a.chunk.js.map