(this.webpackJsonpbasket_front_end=this.webpackJsonpbasket_front_end||[]).push([[0],{28:function(e,t,n){e.exports=n(39)},33:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),o=n.n(r),l=(n(33),n(9)),i=n(11),u=n(14),p=n(7),s=n(13),d=n(1),m="https://basketapp-api.herokuapp.com";var E=function(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)({login:"",password:"",name:""}),l=Object(s.a)(o,2),i=l[0],E=l[1],h=Object(d.b)();function f(e){E(Object(p.a)({},i,Object(u.a)({},e.target.name,e.target.value)))}return c.a.createElement("div",null,c.a.createElement("div",{className:"form-page"},c.a.createElement("h1",null,n?"Log In":"New Employee"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=n?"/login":"/employees",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};fetch(m+t,a).then((function(e){return e.json()})).then((function(e){e.employee?(localStorage.token=e.token,localStorage.employee=JSON.stringify(e.employee),h({type:"SET_EMPLOYEE",payload:e.employee}),h({type:"SET_CURRENT_CHECK",payload:{id:-1}})):alert(e.error)}))}},"Login:",c.a.createElement("input",{type:"text",name:"login",value:i.login,onChange:f,placeholder:"Login"}),"Password:",c.a.createElement("input",{type:"password",name:"password",value:i.password,onChange:f,placeholder:"Password"}),!n&&c.a.createElement("div",null,"Name:",c.a.createElement("input",{type:"text",name:"name",value:i.name,onChange:f,placeholder:"Name"})),c.a.createElement("input",{type:"submit"})),n?c.a.createElement("button",{onClick:function(){return r(!1)}},"Set new employee"):c.a.createElement("button",{onClick:function(){return r(!0)}},"Employee log in")),c.a.createElement("button",{onClick:function(){h({type:"CLEAR_EMPLOYEE"}),h({type:"SET_CURRENT_CHECK",payload:{id:-1}}),localStorage.clear()}},"Logout"))};function h(){var e=Object(a.useState)({name:"",price:"",tax:""}),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(d.b)();function l(e){r(Object(p.a)({},n,Object(u.a)({},e.target.name,e.target.value)))}return c.a.createElement("div",{className:"item-form"},c.a.createElement("h1",null,"New Product"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch(m+"/products",t).then((function(e){return e.json()})).then((function(e){console.log("data",e),o({type:"ADD_PRODUCT",payload:e})}))}},"Name:",c.a.createElement("input",{type:"text",name:"name",value:n.name,onChange:l,placeholder:"Name"}),"Price:",c.a.createElement("input",{type:"text",name:"price",value:n.price,onChange:l,placeholder:"Price"}),c.a.createElement("input",{type:"submit"})))}function f(){return c.a.createElement("div",{className:"page"},c.a.createElement(E,null),c.a.createElement(h,null))}var y=n(25),C=n.n(y);function b(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.currentCheck})),n=Object(d.c)((function(e){return e.checks})),a=-1===t.id?0:t.products.reduce((function(e,t){return e+t.price}),0);return c.a.createElement("div",{className:"page"},c.a.createElement(C.a,{token:function(c){var r={token:c.id},o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({charge:r,price:100*a})};fetch("https://basketapp-api.herokuapp.com/charge_adapter",o).then((function(e){return e.json()})).then((function(c){!function(c){var r={check_id:t.id,amount:a,credit:!0,last_four:c.payment_method_details.card.last4,stripe_id:c.id};fetch(m+"/sales",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(){e({type:"SET_STATUS_CURRENT_CHECK",payload:!1}),e({type:"SET_STATUS",payload:{setCheck:t,status:!1}});var a=n.length>0?{type:"SET_CURRENT_CHECK",payload:n.find((function(e){return e.open&&e.id!==t.id}))}:{type:"SET_CURRENT_CHECK",payload:{id:-1}};e(a)}))}(c)}))},stripeKey:"pk_test_hu8PVV0R7B8kvBXe6dcMJzv900zdD0uCqV"}))}function O(){return c.a.createElement(b,null)}function T(e){var t=e.product;return c.a.createElement("div",null,c.a.createElement("button",{key:t.id,onClick:function(){return e.addProductToCurrentCheck(t)}},t.name))}function _(){var e=Object(d.c)((function(e){return e.currentCheck})),t=Object(d.b)(),n=Object(d.c)((function(e){return e.products}));Object(a.useEffect)((function(){fetch(m+"/products").then((function(e){return e.json()})).then((function(e){t({type:"SET_PRODUCTS",payload:e})}))}),[t]);var r=function(n){console.log(n.id),fetch(m+"/sales",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({check_id:e.id,product_id:n.id})}).then((function(e){return e.json()})).then((function(a){t({type:"ADD_PRODUCT_TO_CURRENT_CHECK",payload:n}),t({type:"ADD_PRODUCT_TO_CHECKS",payload:{newCheck:e,newProduct:n}})}))};return c.a.createElement("div",{className:"page"},n.map((function(e){return c.a.createElement(T,{product:e,key:e.id,addProductToCurrentCheck:r})})))}function k(){return c.a.createElement(_,null)}function v(){var e=Object(d.c)((function(e){return e.employee}));return c.a.createElement("div",{className:"nav-bar"},c.a.createElement("p",{className:"item"},"Logged in: ",e.name),c.a.createElement("nav",null,c.a.createElement(l.b,{to:"/"},c.a.createElement("button",null,"Products")),c.a.createElement(l.b,{to:"/options"},c.a.createElement("button",null,"Options")),c.a.createElement(l.b,{to:"/payment"},c.a.createElement("button",null,"Payment")),c.a.createElement(l.b,{to:"/reports"},c.a.createElement("button",null,"Reports"))))}function g(e){var t=Object(d.b)(),n=Object(a.useState)(!1),r=Object(s.a)(n,2),o=r[0],l=r[1],i=e.check,u=0;return c.a.createElement("div",null,i.id,c.a.createElement("button",{onClick:function(){l(!o)}},"Show Check"),o?c.a.createElement("div",null,c.a.createElement("ul",null,i.products.map((function(e){return u+=e.price,c.a.createElement("li",{key:e.id},c.a.createElement("h5",{key:e.name},e.name),c.a.createElement("h6",{key:e.price},e.price))}))),c.a.createElement("h4",null,"Total: ",u),c.a.createElement("button",{class:"ui button",onClick:function(){return function(){var e={check_id:i.id};fetch(m+"/reopen_check",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(){t({type:"SET_STATUS",payload:{setCheck:i,status:!0}})}))}()}},"Reopen Check")):c.a.createElement("div",null))}function j(){var e=Object(d.c)((function(e){return e.checks}));return c.a.createElement("div",{className:"page"},c.a.createElement("h1",null,"Closed Checks"),e.length>0?e.map((function(e){return e.open?c.a.createElement(c.a.Fragment,null):c.a.createElement("div",null,c.a.createElement(g,{key:e.id,check:e}))})):c.a.createElement(c.a.Fragment,null))}function S(){return c.a.createElement("div",{className:"nav-page"},c.a.createElement(v,null),c.a.createElement("div",null,c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:"/",component:k}),c.a.createElement(i.a,{exact:!0,path:"/options",component:f}),c.a.createElement(i.a,{exact:!0,path:"/payment",component:O}),c.a.createElement(i.a,{exact:!0,path:"/reports",component:j}))))}function N(e){var t=e.check;return c.a.createElement("div",{key:t.id,onClick:function(){return e.changeCurrentCheck(t)}},t.id)}function R(){var e=Object(d.c)((function(e){return e.currentCheck})),t=Object(d.b)(),n=0;return c.a.createElement("div",{className:"current-check-container"},c.a.createElement("h2",{className:"current-check-id"},-1===e.id?"":e.id),console.log(e),c.a.createElement("ul",{className:"check-items"},e.products.map((function(a){return n+=a.price,c.a.createElement("li",{key:a.id,className:"check-item"},c.a.createElement("h5",{key:a.name},a.name),c.a.createElement("h6",{key:a.price},a.price),c.a.createElement("button",{onClick:function(){return function(n){fetch(m+"/delete_from_check",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({check_id:e.id,product_id:n.id})}).then((function(e){return e.json()})).then((function(a){console.log(),t({type:"DELETE_PRODUCT",payload:{selCheck:e,delProduct:n}}),t({type:"DELETE_PRODUCT_FROM_CURRENT_CHECK",payload:n})}))}(a)}},"Delete Product"))}))),c.a.createElement("h3",null,"Total: ",n))}function P(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.checks})),n=Object(d.c)((function(e){return e.employee})),r=Object(d.c)((function(e){return e.currentCheck}));Object(a.useEffect)((function(){-1===r.id&&t.length>0&&e({type:"SET_CURRENT_CHECK",payload:t.find((function(e){return e.open}))})}),[t,e,r.id]),Object(a.useEffect)((function(){fetch(m+"/get_checks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({employee:n})}).then((function(e){return e.json()})).then((function(t){e({type:"SET_CHECKS",payload:t})}))}),[n,e]);var o=function(t){e({type:"SET_CURRENT_CHECK",payload:t}),console.log(t)};return c.a.createElement("div",{className:"sidebar"},-1===r.id?c.a.createElement("div",{key:-1},"No Open Checks"):c.a.createElement(R,{key:r.id,className:"current-check"}),c.a.createElement("div",{className:"check-button-container"},t.length>0?t.map((function(e){return e.id!==r.id&&e.open?c.a.createElement("div",{className:"check-button",key:e.id},c.a.createElement(N,{key:e.id,check:e,changeCurrentCheck:o,class:"item"})):c.a.createElement(c.a.Fragment,null)})):"no checks"),c.a.createElement("button",{className:"button",onClick:function(){fetch(m+"/checks",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({employee:n})}).then((function(e){return e.json()})).then((function(n){e({type:"ADD_CHECK",payload:n}),e({type:"SET_CURRENT_CHECK",payload:t.length>1?t[t.length-1]:t[0]})}))}},"New Check"))}var D=function(){var e=Object(d.b)();return Object(a.useEffect)((function(){localStorage.length>0&&e({type:"SET_EMPLOYEE",payload:JSON.parse(localStorage.employee)})}),[e]),c.a.createElement("div",{id:"app"},c.a.createElement(l.a,null,c.a.createElement(P,null),c.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(27),w=n(8),K=n(10);function A(e,t){return Object(K.a)(e).filter((function(e){return e.id!==t.id}))}function H(e,t){return[].concat(Object(K.a)(e),[t])}function L(e,t){var n=e.slice();return console.log("hayyy"),n.map((function(e){if(e.id===t.selCheck.id){var n=e.products.findIndex((function(e){return e.id===t.delProduct.id}));return e.products.splice(n,1)}return[]})),n}function J(e,t){var n=e.slice();return n.map((function(e){return e.id===t.newCheck.id?e.products.push(t.newProduct):[]})),n}function x(e,t){var n=e.slice();return n.map((function(e){return e.id===t.setCheck.id?e.open=t.status:e.open})),n}function M(e,t){return Object(p.a)({},e,{products:[].concat(Object(K.a)(e.products),[t])})}function F(e,t){var n=e.products.slice(),a=e.products.findIndex((function(e){return e.id===t.id}));return console.log("test",e.products.splice(a,1)),n.splice(a,1),console.log("products",n),Object(p.a)({},e,{products:n})}function Y(e,t){return Object(p.a)({},e,{open:t})}function B(e,t){return Object(K.a)(e).filter((function(e){return e.id!==t.id}))}function I(e,t){return[].concat(Object(K.a)(e),[t])}var V={employee:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_EMPLOYEE":return a;case"CLEAR_EMPLOYEE":return{};default:return e}},currentCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:-1},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_CURRENT_CHECK":return a;case"ADD_PRODUCT_TO_CURRENT_CHECK":return M(e,a);case"DELETE_PRODUCT_FROM_CURRENT_CHECK":return F(e,a);case"SET_STATUS_CURRENT_CHECK":return Y(e,a);default:return e}},checks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_CHECKS":return a;case"DELETE_CHECK":return A(e,a);case"ADD_CHECK":return H(e,a);case"DELETE_PRODUCT":return L(e,a);case"ADD_PRODUCT_TO_CHECKS":return J(e,a);case"SET_STATUS":return x(e,a);default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_PRODUCTS":return a;case"DELETE_PRODUCT":return B(e,a);case"ADD_PRODUCT":return I(e,a);default:return e}}},z=Object(w.c)(V),W=Object(w.e)(z,Object(w.d)(Object(w.a)(U.a)));o.a.render(c.a.createElement(d.a,{store:W},c.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.fac564cf.chunk.js.map